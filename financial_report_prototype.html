<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Financial Report - Strategic Planning Suite</title>
    <style>
        /* ============================================
           MODERN DESIGN SYSTEM - FINANCIAL THEME
           ============================================ */

        :root {
            /* Primary Colors - Financial Theme */
            --primary-color: #2E7D32;
            --primary-dark: #1B5E20;
            --primary-light: #4CAF50;

            /* Secondary Colors */
            --secondary: #FF9800;
            --secondary-dark: #F57C00;
            --accent: #2196F3;

            /* Status Colors */
            --success: #4CAF50;
            --success-light: #E8F5E8;
            --warning: #FF9800;
            --warning-light: #FFF3E0;
            --error: #F44336;
            --error-light: #FFEBEE;
            --info: #2196F3;

            /* Neutral Colors */
            --text-primary: #1a202c;
            --text-secondary: #718096;
            --text-light: #a0aec0;
            --text-white: #ffffff;
            --bg-main: #f7fafc;
            --bg-card: #ffffff;
            --bg-secondary: #f1f5f9;
            --border: #e2e8f0;
            --border-dark: #cbd5e0;

            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-glow: 0 0 20px rgba(46, 125, 50, 0.3);

            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;

            /* Typography */
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;

            /* Border Radius */
            --radius-sm: 0.125rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            --radius-full: 9999px;

            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-main);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.6;
            font-weight: 400;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            padding-top: 100px;
            border-bottom: 3px solid var(--primary-color);
            position: relative;
            background: var(--primary-color);
            color: var(--text-white);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            box-shadow: var(--shadow-md);
        }

        header h1 {
            color: var(--text-white);
            font-size: 2.75em;
            margin-bottom: 12px;
            font-weight: 800;
            letter-spacing: -0.02em;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        header .subtitle {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.2em;
            font-weight: 400;
        }

        /* Navigation */
        .nav-buttons {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            z-index: 10;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: var(--text-white);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 18px;
            border-radius: var(--radius-full);
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-family: 'Inter', sans-serif;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Control Buttons */
        .control-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn-control {
            background: var(--primary-color);
            color: var(--text-white);
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-full);
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            font-family: 'Inter', sans-serif;
        }

        .btn-control:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-control:active {
            transform: translateY(-1px) scale(1);
        }

        /* Form Styles */
        .financial-form {
            padding: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .form-section {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }

        .form-section h3 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 1em;
            transition: border-color var(--transition-fast);
            background: var(--bg-card);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .form-input.error {
            border-color: var(--error);
        }

        .error-message {
            color: var(--error);
            font-size: 0.875em;
            margin-top: 4px;
            display: none;
        }

        /* Expenses Grid - Two Columns */
        .expenses-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .expense-column {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            min-height: 300px; /* Minimum height but allow growth */
        }

        .expense-column-header {
            background: var(--bg-secondary);
            padding: 20px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0; /* Don't shrink header */
        }

        .expense-column-header h4 {
            color: var(--primary-color);
            font-size: 1.2em;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .expense-description {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .expense-items-container {
            flex: 1; /* Take remaining space */
            padding: 0;
            min-height: 200px; /* Minimum space for content */
        }

        .add-expense-btn {
            flex-shrink: 0; /* Don't shrink button */
            margin: 15px 20px;
        }

        .column-subtotal {
            flex-shrink: 0; /* Don't shrink subtotal */
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            text-align: center;
            font-size: 1.1em;
        }


        /* Expense Items */
        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid var(--border);
            transition: background var(--transition-fast);
        }

        .expense-item:hover {
            background: var(--bg-secondary);
        }

        .expense-item:last-child {
            border-bottom: none;
        }

        .expense-item-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
            flex: 1;
        }

        .expense-item input {
            padding: 6px 8px;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.9em;
            height: 32px; /* Fixed height for consistency */
        }

        .expense-item input:first-child {
            flex: 2; /* Description takes more space */
            min-width: 0; /* Allow shrinking */
        }

        .expense-item input:last-of-type {
            flex: 1; /* Amount takes less space */
            max-width: 100px; /* Limit amount field width */
        }

        .expense-item input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .expense-item .remove-expense {
            background: var(--error);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.8em;
            transition: background var(--transition-fast);
            flex-shrink: 0;
        }

        .expense-item .remove-expense:hover {
            background: #d32f2f;
        }

        .expense-item-actions {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .add-expense-confirm {
            background: var(--success);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.8em;
            transition: background var(--transition-fast);
            font-weight: bold;
        }

        .add-expense-confirm:hover {
            background: #388e3c;
        }

        .add-expense-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 10px;
            width: 100%;
            transition: background var(--transition-fast);
        }

        .add-expense-btn:hover {
            background: #388e3c;
        }

        /* Summary Section */
        .summary-section {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            margin-top: 30px;
        }

        .summary-section h3 {
            color: white;
            text-align: center;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            backdrop-filter: blur(10px);
        }

        .summary-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .summary-value {
            font-size: 1.8em;
            font-weight: 800;
            color: white;
        }

        .summary-positive {
            color: var(--success);
        }

        .summary-negative {
            color: var(--error);
        }

        .generate-report-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            margin-top: 25px;
            width: 100%;
            transition: all var(--transition-base);
        }

        .generate-report-btn:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .generate-report-btn:disabled {
            background: var(--text-light);
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
        }

        /* Step-Based Interface */
        .step-section {
            display: none;
        }

        .step-section.active {
            display: block;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
        }

        .step-header h3 {
            color: var(--primary-color);
            margin: 0;
        }

        .step-progress {
            background: var(--primary-color);
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: 0.85em;
            font-weight: 600;
        }

        /* Educational Content */
        .educational-content {
            margin-bottom: 30px;
        }

        .motivational-text {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--primary-color);
            margin-bottom: 20px;
        }

        .motivational-text p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .motivational-text p:last-child {
            margin-bottom: 0;
        }

        .motivational-text strong {
            color: var(--primary-color);
        }

        .action-required {
            background: var(--warning-light);
            border: 1px solid var(--warning);
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 20px;
        }

        .action-required h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        /* Hints Section */
        .hints-section {
            margin-bottom: 20px;
        }

        .hint-toggle {
            background: var(--info);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: background var(--transition-fast);
        }

        .hint-toggle:hover {
            background: #1976d2;
        }

        .hints-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-top: 10px;
        }

        .hints-content ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .hints-content li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .hints-content em {
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Step Navigation */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .next-step-btn,
        .prev-step-btn {
            padding: 12px 20px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .next-step-btn {
            background: var(--success);
            color: white;
        }

        .next-step-btn:hover:not(:disabled) {
            background: #388e3c;
            transform: translateY(-2px);
        }

        .next-step-btn:disabled {
            background: var(--text-light);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .prev-step-btn {
            background: var(--text-secondary);
            color: white;
        }

        .prev-step-btn:hover {
            background: var(--text-primary);
        }

        /* Expense Input Section */
        .expense-input-section {
            margin-top: 20px;
        }

        .current-total {
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 1.1em;
            margin-top: 15px;
            border-radius: var(--radius-md);
        }

        /* Reality Check */
        .reality-check {
            background: linear-gradient(135deg, var(--warning-light), var(--warning));
            border: 2px solid var(--warning);
            border-radius: var(--radius-lg);
            padding: 25px;
            margin: 25px 0;
        }

        .check-question h4 {
            color: var(--text-primary);
            margin-bottom: 15px;
        }

        .check-question p {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .honesty-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .honesty-btn {
            flex: 1;
            min-width: 200px;
            padding: 15px 20px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .honesty-btn.primary {
            background: var(--success);
            color: white;
        }

        .honesty-btn.primary:hover {
            background: #388e3c;
            transform: translateY(-2px);
        }

        .honesty-btn:not(.primary) {
            background: var(--warning);
            color: white;
        }

        .honesty-btn:not(.primary):hover {
            background: #f57c00;
        }

        /* Financial Summary Review */
        .financial-summary-review {
            margin-top: 30px;
        }

        .summary-review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .summary-review-item {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
        }

        .summary-review-item.full-width {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
        }

        .summary-review-label {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .summary-review-item.full-width .summary-review-label {
            color: rgba(255, 255, 255, 0.9);
        }

        .summary-review-value {
            font-size: 2em;
            font-weight: 800;
            color: var(--text-primary);
        }

        .summary-review-item.full-width .summary-review-value {
            color: white;
            font-size: 2.5em;
        }

        .bottom-line-explanation {
            margin-top: 10px;
            font-size: 1em;
            font-weight: 600;
            color: white;
        }

        .bottom-line-positive {
            color: var(--success);
        }

        .bottom-line-negative {
            color: var(--error);
        }

        /* Report Styles */
        .report-section {
            padding: 30px;
            max-width: 1000px;
            margin: 0 auto;
            display: none;
        }

        .report-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .report-header h2 {
            color: var(--primary-color);
            font-size: 2em;
            margin-bottom: 10px;
        }

        .report-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .report-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border);
        }

        .report-card h4 {
            color: var(--primary-color);
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .expense-list {
            margin-bottom: 20px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .expense-item:last-child {
            border-bottom: none;
        }

        .expense-amount {
            font-weight: 600;
            color: var(--text-primary);
        }

        .subtotal {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid var(--primary-color);
        }

        .metric-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border);
        }

        .metric-value {
            font-size: 2em;
            font-weight: 800;
            margin: 10px 0;
        }

        .metric-positive {
            color: var(--success);
        }

        .metric-negative {
            color: var(--error);
        }

        .metric-neutral {
            color: var(--text-primary);
        }

        .metric-label {
            color: var(--text-secondary);
            font-size: 0.9em;
            font-weight: 600;
        }

        /* Chart Container */
        .chart-container {
            margin-top: 30px;
            text-align: center;
        }

        .chart-placeholder {
            background: var(--bg-secondary);
            border: 2px dashed var(--border);
            border-radius: var(--radius-lg);
            padding: 40px;
            margin: 20px 0;
            color: var(--text-secondary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .expenses-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .expense-column {
                min-height: 250px; /* Minimum height on mobile */
            }

            .expense-item-input-group {
                flex-direction: column;
                gap: 8px;
            }

            .expense-item input {
                width: 100%;
            }

            .expense-item-actions {
                justify-content: center;
            }

            .summary-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .report-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .financial-form {
                padding: 20px;
            }

            .report-section {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 2em;
            }

            .form-section {
                padding: 15px;
            }

            .expense-row {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="nav-buttons">
                <a href="prototypes_home.html" class="nav-btn">‚Üê Home</a>
            </div>
            <h1>Personal Financial Report</h1>
            <p class="subtitle">Track your income, categorize expenses, and identify savings opportunities</p>
        </header>

        <main>
            <!-- Control Buttons -->
            <div class="control-buttons">
                <button class="btn-control" onclick="showLearnMenu()">üìñ Learn</button>
                <button class="btn-control" onclick="toggleExamplesMode()" id="examplesModeBtn">üëÅÔ∏è View Examples</button>
            </div>

            <!-- Financial Input Form -->
            <!-- Educational Financial Assessment -->
            <div class="financial-form" id="financialForm">

                <!-- Step 1: Introduction & Income -->
                <div class="form-section step-section active" id="stepIncome">
                    <div class="step-header">
                        <h3>üéØ Step 1: Let's Get Honest About Your Money</h3>
                        <div class="step-progress">Step 1 of 4</div>
                    </div>
                    <div class="educational-content">
                        <div class="motivational-text">
                            <p><strong>Hey, let's be real for a minute...</strong></p>
                            <p>Most people don't even realize how much money they spend every month on unnecessary items. You know those little things - stopping at the gas station before work for an energy drink, chips, and a Gatorade. It's these small purchases that really keep us from getting ahead in life.</p>
                            <p>The hardest thing for most people is being honest with themselves. We all want to believe we're doing better than we really are. But here's the truth: you can't fix what you won't face.</p>
                            <p><strong>Why does this matter?</strong> Because until you know exactly where every penny goes, you can't take control of your financial future. This isn't about judgment - it's about awareness. And awareness is the first step to real change.</p>
                        </div>
                        <div class="action-required">
                            <h4>üìà Start Here: Your Monthly Income</h4>
                            <p>Enter your <strong>net income</strong> (after taxes and deductions). Be honest - this is your foundation.</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="monthlyIncome">Monthly Net Income (after taxes)</label>
                        <input type="number" id="monthlyIncome" class="form-input" placeholder="Your take-home pay each month" min="0" step="0.01" onchange="updateTotals(); updateStepNavigation();" oninput="updateTotals(); updateStepNavigation();">
                        <div class="error-message" id="incomeError">Please enter your actual net income</div>
                    </div>
                    <div class="step-navigation">
                        <button type="button" class="next-step-btn" onclick="nextStep('income')" disabled id="incomeNextBtn">Continue to Fixed Expenses ‚Üí</button>
                    </div>
                </div>

                <!-- Step 2: Fixed Expenses -->
                <div class="form-section step-section" id="stepFixed">
                    <div class="step-header">
                        <h3>üè† Step 2: Your Fixed Expenses - The Must-Haves</h3>
                        <div class="step-progress">Step 2 of 4</div>
                    </div>
                    <div class="educational-content">
                        <div class="motivational-text">
                            <p><strong>These are the expenses you HAVE to pay to keep a roof over your head and survive.</strong></p>
                            <p>Think house payment, car payment, food, insurance, utilities - the things that if you don't pay, you could lose your home, car, or go hungry. These are your foundation expenses.</p>
                            <p>Don't include anything you could cut if you really had to. Be thorough but honest.</p>
                        </div>
                        <div class="hints-section">
                            <button type="button" class="hint-toggle" onclick="toggleHints('fixed')">üí° Need Examples? Click Here</button>
                            <div class="hints-content" id="fixedHints" style="display: none;">
                                <p><strong>Fixed/Necessary Expenses Include:</strong></p>
                                <ul>
                                    <li>üè† House/Rent payment</li>
                                    <li>üöó Car payment or transportation costs</li>
                                    <li>üõ°Ô∏è Insurance (health, car, home)</li>
                                    <li>üí° Utilities (electricity, water, gas)</li>
                                    <li>üõí Groceries (actual food you eat)</li>
                                    <li>üè• Medical expenses</li>
                                    <li>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Child care or support payments</li>
                                    <li>üíº Work-related expenses</li>
                                </ul>
                                <p><em>Remember: These are expenses you can't easily eliminate without major life changes.</em></p>
                            </div>
                        </div>
                    </div>

                    <div class="expense-input-section">
                        <div id="fixedExpensesContainer" class="expense-items-container">
                            <!-- Fixed expense items will be added here -->
                        </div>
                        <button type="button" class="add-expense-btn" onclick="addExpenseToCategory('Necessary')">‚ûï Add Fixed Expense</button>
                        <div class="current-total">
                            <strong>Fixed Expenses Total: $<span id="necessaryTotal">0.00</span></strong>
                        </div>
                    </div>

                    <div class="step-navigation">
                        <button type="button" class="prev-step-btn" onclick="prevStep('fixed')">‚Üê Back to Income</button>
                        <button type="button" class="next-step-btn" onclick="nextStep('fixed')" id="fixedNextBtn">Continue to Non-Essential ‚Üí</button>
                    </div>
                </div>

                <!-- Step 3: Non-Essential Expenses -->
                <div class="form-section step-section" id="stepNonEssential">
                    <div class="step-header">
                        <h3>üéØ Step 3: Non-Essential Expenses - The Truth Hurts</h3>
                        <div class="step-progress">Step 3 of 4</div>
                    </div>
                    <div class="educational-content">
                        <div class="motivational-text">
                            <p><strong>This is where most people get honest with themselves... or avoid it.</strong></p>
                            <p>These are the things you buy that you don't absolutely NEED to survive. The daily stops, the subscriptions you forget about, the habits that drain your account.</p>
                            <p>Here's the hard truth: If you're broke at the end of the month but your list shows money left over, you're not being honest here. Every penny counts. Break your month down into weeks, your weeks into days. Where does that money go?</p>
                            <p>The gas station stop every morning? The vending machine snack? The streaming service you never watch? These add up faster than you think.</p>
                        </div>
                        <div class="hints-section">
                            <button type="button" class="hint-toggle" onclick="toggleHints('nonEssential')">üí° Common Non-Essential Expenses</button>
                            <div class="hints-content" id="nonEssentialHints" style="display: none;">
                                <p><strong>Non-Essential Expenses Include:</strong></p>
                                <ul>
                                    <li>üö¨ Cigarettes or vaping</li>
                                    <li>üç∫ Alcohol and bars</li>
                                    <li>‚òï Daily coffee/latte runs</li>
                                    <li>üçü Fast food and takeout</li>
                                    <li>üé¨ Streaming services (Netflix, etc.)</li>
                                    <li>üéÆ Video games and entertainment</li>
                                    <li>üõí Impulse purchases</li>
                                    <li>üì± Phone apps and in-app purchases</li>
                                    <li>üíÖ Salon, spa, or grooming</li>
                                    <li>üëï Clothing you don't need</li>
                                    <li>üé≠ Hobbies and recreational activities</li>
                                    <li>üöó Extra car washes/detailing</li>
                                </ul>
                                <p><em>Think daily habits: That $5 energy drink every morning = $150/month. Small things add up.</em></p>
                            </div>
                        </div>
                    </div>

                    <div class="expense-input-section">
                        <div id="nonEssentialExpensesContainer" class="expense-items-container">
                            <!-- Non-essential expense items will be added here -->
                        </div>
                        <button type="button" class="add-expense-btn" onclick="addExpenseToCategory('Non-Necessary')">‚ûï Add Non-Essential Expense</button>
                        <div class="current-total">
                            <strong>Non-Essential Total: $<span id="nonNecessaryTotal">0.00</span></strong>
                        </div>
                    </div>

                    <div class="step-navigation">
                        <button type="button" class="prev-step-btn" onclick="prevStep('nonEssential')">‚Üê Back to Fixed Expenses</button>
                        <button type="button" class="next-step-btn" onclick="nextStep('nonEssential')" id="nonEssentialNextBtn">Review Your Finances ‚Üí</button>
                    </div>
                </div>

                <!-- Step 4: Financial Reality Check -->
                <div class="form-section step-section" id="stepReview">
                    <div class="step-header">
                        <h3>üîç Step 4: The Moment of Truth</h3>
                        <div class="step-progress">Step 4 of 4</div>
                    </div>
                    <div class="educational-content">
                        <div class="motivational-text">
                            <p><strong>Now we see the real picture.</strong></p>
                            <p>Look at these numbers. Does this match your reality? If you're broke every month but this shows money left over, we missed something. Go back through your days, your weeks, your month. That $5 here, $10 there - it adds up.</p>
                            <p><strong>You can't fix what you won't see.</strong> And you can't see it until you're honest about where your money goes.</p>
                            <p>The goal here isn't perfection - it's awareness. Once you know where your money goes, you can make real changes.</p>
                        </div>

                        <div class="reality-check" id="realityCheck">
                            <div class="check-question">
                                <h4>ü§î Be Honest: Does this match your experience?</h4>
                                <p>If these numbers don't reflect reality, you haven't captured all your spending. Every penny matters.</p>
                                <div class="honesty-buttons">
                                    <button type="button" class="honesty-btn" onclick="beHonest()" id="beHonestBtn">I Need to Add More Expenses</button>
                                    <button type="button" class="honesty-btn primary" onclick="acceptReality()" id="acceptRealityBtn" disabled>These Numbers Are Accurate</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Summary -->
                    <div class="financial-summary-review">
                        <div class="summary-review-grid">
                            <div class="summary-review-item">
                                <div class="summary-review-label">Monthly Income</div>
                                <div class="summary-review-value" id="reviewIncome">$0.00</div>
                            </div>
                            <div class="summary-review-item">
                                <div class="summary-review-label">Fixed Expenses</div>
                                <div class="summary-review-value" id="reviewFixed">$0.00</div>
                            </div>
                            <div class="summary-review-item">
                                <div class="summary-review-label">Non-Essential Expenses</div>
                                <div class="summary-review-value" id="reviewNonEssential">$0.00</div>
                            </div>
                            <div class="summary-review-item">
                                <div class="summary-review-label">Total Expenses</div>
                                <div class="summary-review-value" id="reviewTotalExpenses">$0.00</div>
                            </div>
                            <div class="summary-review-item full-width">
                                <div class="summary-review-label">Bottom Line</div>
                                <div class="summary-review-value" id="reviewBottomLine">$0.00</div>
                                <div class="bottom-line-explanation" id="bottomLineExplanation"></div>
                            </div>
                        </div>
                    </div>

                    <div class="step-navigation">
                        <button type="button" class="prev-step-btn" onclick="prevStep('review')">‚Üê Back to Non-Essential</button>
                        <button type="button" class="generate-report-btn" onclick="generateReport()" id="finalReportBtn" disabled>üìä Generate My Financial Report</button>
                    </div>
                </div>
            </div>

            <!-- Report Output Section -->
            <div class="report-section" id="reportSection">
                <div class="report-header">
                    <h2>Your Financial Report</h2>
                    <p>Analysis based on your monthly income and expenses</p>
                </div>

                <div class="report-grid">
                    <!-- Necessary Expenses -->
                    <div class="report-card">
                        <h4>üîí Necessary Expenses</h4>
                        <div id="necessaryExpensesList" class="expense-list"></div>
                        <div id="necessarySubtotal" class="subtotal"></div>
                    </div>

                    <!-- Non-Necessary Expenses -->
                    <div class="report-card">
                        <h4>üéØ Non-Necessary Expenses</h4>
                        <div id="nonNecessaryExpensesList" class="expense-list"></div>
                        <div id="nonNecessarySubtotal" class="subtotal"></div>
                    </div>
                </div>

                <!-- Financial Metrics -->
                <div class="report-grid">
                    <div class="metric-card">
                        <div class="metric-label">Monthly Income</div>
                        <div id="reportIncome" class="metric-value metric-neutral">$0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Expenses</div>
                        <div id="reportTotalExpenses" class="metric-value metric-neutral">$0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Savings/Deficit</div>
                        <div id="reportSavings" class="metric-value">$0.00</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Savings Rate</div>
                        <div id="reportSavingsPercentage" class="metric-value">0.0%</div>
                    </div>
                </div>

                <!-- Chart Placeholder -->
                <div class="chart-container">
                    <div class="chart-placeholder">
                        <h4>üí° Financial Overview Chart</h4>
                        <p>Chart visualization would be displayed here</p>
                        <small>(Chart.js integration available for future enhancement)</small>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ============================================
        // EDUCATIONAL FINANCIAL ASSESSMENT
        // ============================================

        // Data Model
        let financialData = {
            monthlyIncome: 0,
            expenses: []
        };

        let expenseCounter = 0;
        let currentStep = 'income';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();
            showStep('income');
            updateStepNavigation(); // Initialize button states
            updateTotals(); // Initialize totals display
        });

        // Add expense to total when check mark is clicked
        function addExpenseToTotal(expenseId) {
            const expenseItem = document.getElementById(expenseId);
            if (expenseItem) {
                expenseItem.setAttribute('data-confirmed', 'true');
                expenseItem.style.opacity = '0.7'; // Visual feedback that it's confirmed
                updateTotals();
            }
        }

        // Step navigation
        function nextStep(fromStep) {
            if (fromStep === 'income') {
                const incomeInput = document.getElementById('monthlyIncome');
                const incomeValue = incomeInput ? incomeInput.value.trim() : '';
                const income = parseFloat(incomeValue) || 0;

                console.log('Next step - Income value:', incomeValue, 'Parsed income:', income);

                if (!income || income <= 0) {
                    alert('Please enter a valid monthly income amount greater than $0 to continue.');
                    return;
                }
                showStep('fixed');
            } else if (fromStep === 'fixed') {
                showStep('nonEssential');
            } else if (fromStep === 'nonEssential') {
                showStep('review');
                updateReviewSummary();
            }
        }

        function prevStep(fromStep) {
            if (fromStep === 'fixed') {
                showStep('income');
            } else if (fromStep === 'nonEssential') {
                showStep('fixed');
            } else if (fromStep === 'review') {
                showStep('nonEssential');
            }
        }

        function showStep(stepName) {
            // Hide all steps
            document.querySelectorAll('.step-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show target step
            document.getElementById('step' + stepName.charAt(0).toUpperCase() + stepName.slice(1)).classList.add('active');
            currentStep = stepName;

            // Update navigation buttons
            updateStepNavigation();
        }

        function updateStepNavigation() {
            const incomeInput = document.getElementById('monthlyIncome');
            const incomeValue = incomeInput ? incomeInput.value.trim() : '';
            const income = parseFloat(incomeValue) || 0;

            const incomeNextBtn = document.getElementById('incomeNextBtn');
            const fixedNextBtn = document.getElementById('fixedNextBtn');
            const nonEssentialNextBtn = document.getElementById('nonEssentialNextBtn');

            // Debug logging
            console.log('Income value:', incomeValue, 'Parsed income:', income, 'Button disabled:', !income || income <= 0);

            // Income step validation - income must be a positive number
            if (incomeNextBtn) {
                incomeNextBtn.disabled = !income || income <= 0;
                console.log('Income button disabled state:', incomeNextBtn.disabled);
            }

            // Other steps can always proceed (user can go back if needed)
            if (fixedNextBtn) fixedNextBtn.disabled = false;
            if (nonEssentialNextBtn) nonEssentialNextBtn.disabled = false;
        }

        // Add a new expense item to a specific category
        function addExpenseToCategory(category, description = '', amount = '') {
            expenseCounter++;
            const expenseId = 'expense_' + expenseCounter;

            const containerId = category === 'Necessary' ? 'fixedExpensesContainer' : 'nonEssentialExpensesContainer';
            const container = document.getElementById(containerId);

            const expenseItem = document.createElement('div');
            expenseItem.className = 'expense-item';
            expenseItem.id = expenseId;

            expenseItem.innerHTML = `
                <div class="expense-item-input-group">
                    <input type="text" placeholder="Expense description" value="${description}" class="expense-description">
                    <input type="number" placeholder="Amount" value="${amount}" min="0" step="0.01" class="expense-amount">
                </div>
                <div class="expense-item-actions">
                    <button type="button" class="add-expense-confirm" onclick="addExpenseToTotal('${expenseId}')">‚úì</button>
                    <button type="button" class="remove-expense" onclick="removeExpense('${expenseId}')">√ó</button>
                </div>
            `;

            container.appendChild(expenseItem);

            // Focus on the description input for new items
            if (!description) {
                setTimeout(() => {
                    const descInput = expenseItem.querySelector('.expense-description');
                    if (descInput) descInput.focus();
                }, 100);
            }

            // No automatic calculation update - user must confirm with check mark
        }

        // Remove an expense item
        function removeExpense(expenseId) {
            const item = document.getElementById(expenseId);
            if (item) {
                item.remove();
                updateTotals();
            }
        }

        // Toggle hints visibility
        function toggleHints(category) {
            const hintsElement = document.getElementById(category + 'Hints');
            const isVisible = hintsElement.style.display !== 'none';
            hintsElement.style.display = isVisible ? 'none' : 'block';
        }

        // Update totals and display (only for confirmed expenses)
        function updateTotals() {
            const data = collectData();
            const report = computeReport(data);

            // Update summary section
            document.getElementById('summaryIncome').textContent = '$' + report.income.toFixed(2);
            document.getElementById('summaryTotalExpenses').textContent = '$' + report.totalExpenses.toFixed(2);
            document.getElementById('summarySavings').textContent = (report.savingsOrDeficit >= 0 ? '$' : '-$') + Math.abs(report.savingsOrDeficit).toFixed(2);
            document.getElementById('summarySavingsPercentage').textContent = Math.abs(report.savingsPercentage).toFixed(1) + '%';

            // Update step-specific displays
            if (currentStep === 'fixed' || currentStep === 'nonEssential') {
                document.getElementById('necessaryTotal').textContent = report.totalNecessary.toFixed(2);
                document.getElementById('nonNecessaryTotal').textContent = report.totalNonNecessary.toFixed(2);
            }

            // Update review summary if on review step
            if (currentStep === 'review') {
                updateReviewSummary();
            }

            // Save data automatically
            financialData = data;
            saveData();

            // Update navigation
            updateStepNavigation();
        }

        // Update the review step summary
        function updateReviewSummary() {
            const data = collectData();
            const report = computeReport(data);

            document.getElementById('reviewIncome').textContent = '$' + report.income.toFixed(2);
            document.getElementById('reviewFixed').textContent = '$' + report.totalNecessary.toFixed(2);
            document.getElementById('reviewNonEssential').textContent = '$' + report.totalNonNecessary.toFixed(2);
            document.getElementById('reviewTotalExpenses').textContent = '$' + report.totalExpenses.toFixed(2);

            const bottomLineElement = document.getElementById('reviewBottomLine');
            const explanationElement = document.getElementById('bottomLineExplanation');

            bottomLineElement.textContent = (report.savingsOrDeficit >= 0 ? '$' : '-$') + Math.abs(report.savingsOrDeficit).toFixed(2);
            bottomLineElement.className = 'summary-review-value ' +
                (report.savingsOrDeficit >= 0 ? 'bottom-line-positive' : 'bottom-line-negative');

            if (report.savingsOrDeficit >= 0) {
                explanationElement.textContent = `You have $${report.savingsOrDeficit.toFixed(2)} left over each month`;
                explanationElement.className = 'bottom-line-explanation bottom-line-positive';
            } else {
                explanationElement.textContent = `You're spending $${Math.abs(report.savingsOrDeficit).toFixed(2)} more than you earn`;
                explanationElement.className = 'bottom-line-explanation bottom-line-negative';
            }

            // Check if expenses are within 0.5% of income for honesty validation
            const income = report.income;
            const expenses = report.totalExpenses;
            const difference = Math.abs(income - expenses);
            const percentDifference = income > 0 ? (difference / income) * 100 : 0;

            const beHonestBtn = document.getElementById('beHonestBtn');
            const acceptRealityBtn = document.getElementById('acceptRealityBtn');
            const finalReportBtn = document.getElementById('finalReportBtn');

            if (percentDifference <= 0.5) {
                // Within acceptable range
                beHonestBtn.style.display = 'none';
                acceptRealityBtn.disabled = false;
                finalReportBtn.disabled = false;
                document.getElementById('realityCheck').style.display = 'none';
            } else {
                // Not within range - user needs to be more honest
                beHonestBtn.style.display = 'inline-block';
                acceptRealityBtn.disabled = true;
                finalReportBtn.disabled = true;
                document.getElementById('realityCheck').style.display = 'block';
            }
        }

        // User acknowledges they need to add more expenses
        function beHonest() {
            alert("Good choice. Go back and really think through your spending. Every penny counts. Break your month into weeks, your weeks into days. That daily coffee stop? That vending machine snack? They add up fast.");
            showStep('nonEssential');
        }

        // User accepts their financial reality
        function acceptReality() {
            alert("Good. Now you know where you stand. Awareness is the first step to change.");
        }

        // Validate form inputs
        function validateForm() {
            let isValid = true;

            // Validate income
            const incomeInput = document.getElementById('monthlyIncome');
            const incomeError = document.getElementById('incomeError');
            const income = parseFloat(incomeInput.value);

            if (!incomeInput.value || isNaN(income) || income < 0) {
                incomeInput.classList.add('error');
                incomeError.style.display = 'block';
                isValid = false;
            } else {
                incomeInput.classList.remove('error');
                incomeError.style.display = 'none';
            }

            // Validate expenses
            const expenseItems = document.querySelectorAll('.expense-item');
            expenseItems.forEach(item => {
                const description = item.querySelector('.expense-description').value.trim();
                const amount = parseFloat(item.querySelector('.expense-amount').value);
                const amountInput = item.querySelector('.expense-amount');

                if (description && (isNaN(amount) || amount < 0)) {
                    amountInput.classList.add('error');
                    isValid = false;
                } else {
                    amountInput.classList.remove('error');
                }
            });

            return isValid;
        }

        // Collect data from form inputs (only confirmed expenses)
        function collectData() {
            const income = parseFloat(document.getElementById('monthlyIncome').value) || 0;
            const expenses = [];

            // Collect confirmed necessary expenses
            const necessaryItems = document.querySelectorAll('#necessaryExpensesContainer .expense-item[data-confirmed="true"]');
            necessaryItems.forEach(item => {
                const description = item.querySelector('.expense-description').value.trim();
                const amount = parseFloat(item.querySelector('.expense-amount').value) || 0;

                if (description && !isNaN(amount) && amount > 0) {
                    expenses.push({
                        description: description,
                        amount: amount,
                        category: 'Necessary'
                    });
                }
            });

            // Collect confirmed non-necessary expenses
            const nonNecessaryItems = document.querySelectorAll('#nonNecessaryExpensesContainer .expense-item[data-confirmed="true"]');
            nonNecessaryItems.forEach(item => {
                const description = item.querySelector('.expense-description').value.trim();
                const amount = parseFloat(item.querySelector('.expense-amount').value) || 0;

                if (description && !isNaN(amount) && amount > 0) {
                    expenses.push({
                        description: description,
                        amount: amount,
                        category: 'Non-Necessary'
                    });
                }
            });

            return {
                monthlyIncome: income,
                expenses: expenses
            };
        }

        // Compute financial report metrics
        function computeReport(data) {
            const totalNecessary = data.expenses
                .filter(exp => exp.category === 'Necessary')
                .reduce((sum, exp) => sum + exp.amount, 0);

            const totalNonNecessary = data.expenses
                .filter(exp => exp.category === 'Non-Necessary')
                .reduce((sum, exp) => sum + exp.amount, 0);

            const totalExpenses = totalNecessary + totalNonNecessary;
            const savingsOrDeficit = data.monthlyIncome - totalExpenses;
            const savingsPercentage = data.monthlyIncome > 0 ?
                (savingsOrDeficit / data.monthlyIncome) * 100 : 0;

            return {
                income: data.monthlyIncome,
                necessaryExpenses: data.expenses.filter(exp => exp.category === 'Necessary'),
                nonNecessaryExpenses: data.expenses.filter(exp => exp.category === 'Non-Necessary'),
                totalNecessary: totalNecessary,
                totalNonNecessary: totalNonNecessary,
                totalExpenses: totalExpenses,
                savingsOrDeficit: savingsOrDeficit,
                savingsPercentage: savingsPercentage
            };
        }

        // Render the financial report
        function renderReport(report) {
            // Helper function to format currency
            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD'
                }).format(amount);
            };

            // Helper function to format percentage
            const formatPercentage = (percentage) => {
                return percentage.toFixed(1) + '%';
            };

            // Render necessary expenses
            const necessaryList = document.getElementById('necessaryExpensesList');
            necessaryList.innerHTML = '';
            report.necessaryExpenses.forEach(expense => {
                const item = document.createElement('div');
                item.className = 'expense-item';
                item.innerHTML = `
                    <span>${expense.description}</span>
                    <span class="expense-amount">${formatCurrency(expense.amount)}</span>
                `;
                necessaryList.appendChild(item);
            });

            // Render non-necessary expenses
            const nonNecessaryList = document.getElementById('nonNecessaryExpensesList');
            nonNecessaryList.innerHTML = '';
            report.nonNecessaryExpenses.forEach(expense => {
                const item = document.createElement('div');
                item.className = 'expense-item';
                item.innerHTML = `
                    <span>${expense.description}</span>
                    <span class="expense-amount">${formatCurrency(expense.amount)}</span>
                `;
                nonNecessaryList.appendChild(item);
            });

            // Update subtotals
            document.getElementById('necessarySubtotal').textContent = `Subtotal: ${formatCurrency(report.totalNecessary)}`;
            document.getElementById('nonNecessarySubtotal').textContent = `Subtotal: ${formatCurrency(report.totalNonNecessary)}`;

            // Update metrics
            document.getElementById('reportIncome').textContent = formatCurrency(report.income);
            document.getElementById('reportTotalExpenses').textContent = formatCurrency(report.totalExpenses);

            const savingsElement = document.getElementById('reportSavings');
            savingsElement.textContent = formatCurrency(report.savingsOrDeficit);
            savingsElement.className = 'metric-value ' +
                (report.savingsOrDeficit >= 0 ? 'metric-positive' : 'metric-negative');

            const percentageElement = document.getElementById('reportSavingsPercentage');
            percentageElement.textContent = formatPercentage(Math.abs(report.savingsPercentage));
            percentageElement.className = 'metric-value ' +
                (report.savingsPercentage >= 0 ? 'metric-positive' : 'metric-negative');
        }

        // Generate and display the detailed financial report
        function generateReport() {
            financialData = collectData();
            const report = computeReport(financialData);

            renderReport(report);

            // Show report section and hide form
            document.getElementById('financialForm').style.display = 'none';
            document.getElementById('reportSection').style.display = 'block';

            // Scroll to report
            document.getElementById('reportSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('financialReportData', JSON.stringify(financialData));
            } catch (e) {
                console.log('Could not save financial report data');
            }
        }


        // Load saved data from localStorage
        function loadSavedData() {
            try {
                const saved = localStorage.getItem('financialReportData');
                if (saved) {
                    financialData = JSON.parse(saved);

                    // Populate form with saved data
                    document.getElementById('monthlyIncome').value = financialData.monthlyIncome || '';

                    // Clear existing expense containers
                    document.getElementById('fixedExpensesContainer').innerHTML = '';
                    document.getElementById('nonEssentialExpensesContainer').innerHTML = '';

                    // Add saved expense items to appropriate categories and mark as confirmed
                    if (financialData.expenses && financialData.expenses.length > 0) {
                        financialData.expenses.forEach(expense => {
                            addExpenseToCategory(expense.category, expense.description, expense.amount);
                            // Mark the last added expense as confirmed
                            setTimeout(() => {
                                const containers = document.querySelectorAll('.expense-items-container');
                                containers.forEach(container => {
                                    const items = container.querySelectorAll('.expense-item');
                                    const lastItem = items[items.length - 1];
                                    if (lastItem) {
                                        lastItem.setAttribute('data-confirmed', 'true');
                                        lastItem.style.opacity = '0.7';
                                    }
                                });
                            }, 100);
                        });
                    }
                } else {
                    // No saved data - add empty items for new users
                    addExpenseToCategory('Necessary');
                    addExpenseToCategory('Non-Necessary');
                }
            } catch (e) {
                console.log('Could not load saved financial report data');
                // Add empty items as fallback
                addExpenseToCategory('Necessary');
                addExpenseToCategory('Non-Necessary');
            }
        }

        // Educational functions
        function showLearnMenu() {
            alert('This guided assessment is designed to help you understand your spending habits. Answer honestly - awareness is the first step to financial freedom.');
        }

        function toggleExamplesMode() {
            alert('Examples mode would show sample financial scenarios. For now, focus on your own spending patterns.');
        }

        // Export functionality (placeholder)
        function exportReport() {
            const report = computeReport(financialData);
            const dataStr = JSON.stringify(report, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });

            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'financial_report.json';
            link.click();
        }
    </script>
</body>
</html>